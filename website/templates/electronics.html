{% extends "base.html" %}
{% block title %}Electronics{% endblock %}
{% block test %}
    <h1>electronics</h1>
{% endblock %}

{% block main %}
    <form id="filter_form" method="POST" action="/electronics">
        <input type="checkbox" name="accessories_filter" id="accessories_filter" value="accessories" {% if 'accessories' in filter_list %} checked {% endif %}> Accessories<br>
        <input type="checkbox" name="data_storage_filter" id="data_storage_filter" value="data_storage" {% if 'data_storage' in filter_list %} checked {% endif %}> Data Storage<br>
        <input type="checkbox" name="desktop_filter" id="desktop_filter" value="desktops" {% if 'desktops' in filter_list %} checked {% endif %}> Desktops<br>
        <input type="checkbox" name="laptop_filter" id="laptop_filter" value="laptops" {% if 'laptops' in filter_list %} checked {% endif %}> Laptops<br>
        <input type="checkbox" name="monitor_filter" id="monitor_filter" value="monitors" {% if 'monitors' in filter_list %} checked {% endif %}> Monitors<br>  
        <input type="checkbox" name="phone_filter" id="phone_filter" value="phones" {% if 'phones' in filter_list %} checked {% endif %}> Phones<br> 
        <input type="checkbox" name="printer_filter" id="printer_filter"value="printers" {% if 'printers' in filter_list %} checked {% endif %}> Printers<br>
        <input type="checkbox" name="tv_filter" id="tv_filter" value="tvs" {% if 'tvs' in filter_list %} checked {% endif %}> TVs<br>   

        <input type="number" name="max_price" id="max_price" value="{{ max_price }}" placeholder="Under £" min="0" max="100000"><br>
        <input type="submit" value="Apply Filter"/>
    </form>
    <form id="reset_filter_form" method="GET" action="/electronics">
        <input type="submit" value="Reset filters"/>
    </form>

    <h1>Products</h1>
    {% if session['admin'] %}
    <h1>
        <a href="/add_product">Add a new product</a><br>
    </h1>
    {% endif %}

    <div class="products">
        {% for product in products %}
            <div class="product">
                <li> 
                    <a href="/electronics/product/{{ product[0] }}">{{ product[1] }}</a> 
                    <span>price: £{{ product[4] }}</span>
                    {% if session['admin'] %}<a href="/edit_product/{{ product[0] }}">(edit)</a>{% endif %}
                    <br>
                    <span id="stock_hidden_{{ product[0] }}" style=display:none></span>
                    {% if product[11] %}
                        <span>Rating: {{ product[11] }}/5</span><br>
                    {% else %}
                        <span>No rating</span><br>
                    {% endif %} 
                    <img src="{{ url_for('static', filename='images/' + product[10]) }}" width="200" height="150"/>
                    <br><br>
                    
                </li>
            </div>
            <script>
                if ({{product[2]}} === 0){
                    document.getElementById('stock_hidden_'+{{ product[0] }}).innerHTML = "Out of stock!";
                    document.getElementById('stock_hidden_'+{{ product[0] }}).style.display = "block";
                }
            </script>
        {% endfor %}
    </div>
{% endblock %}